# -*- conding:utf-8 -*-
from collections import defaultdict
import os
import unittest
import time
import json
from analysis_package.doc_fingerprint_search import Search

fingerprint={'target_doc': {'slh1004279': [30829, 56142, 38397, 62042, 8677833187583193690], 'slh1004324': [31309, 49091, 27862, 18419, 8812910891899439091], 'slh1006218': [41562, 63638, 20208, 7911, 11698936306501426919], 'slh10247': [26953, 37645, 37045, 15755, 7586756733753965963], 'slh10248': [7043, 50754, 12594, 37609, 1982646248568689385]}, 'fingerprint_db': {'slh1000426': [21085, 11454, 31758, 46151, 5934949080580928583], 'slh1000776': [36060, 39220, 4262, 45631, 10150156109082964543], 'slh1002362': [56768, 35267, 65364, 33468, 15978922952805876412], 'slh1003043': [31965, 14213, 24896, 28730, 8997408676557910074], 'slh1003593': [60605, 14861, 50981, 62073, 17058854794399445625], 'slh1003712': [48849, 35083, 63186, 16238, 13749921821817454446], 'slh1004279': [30829, 56142, 38397, 62042, 8677833187583193690], 'slh1004324': [31309, 49091, 27862, 18419, 8812910891899439091], 'slh1004441': [29186, 6730, 4565, 60078, 8215157575706340014], 'slh1005054': [2261, 39063, 64838, 25614, 636582700899525646], 'slh1005665': [44216, 29185, 56173, 13035, 12445822922540266219], 'slh1006218': [41562, 63638, 20208, 7911, 11698936306501426919], 'slh1006379': [16021, 51803, 63055, 96, 4509733098204627040]}}


class TestDocSearch(unittest.TestCase):
    def test_dfp(self):
        global fingerprint
        sumtime = 0
        for i in range(1000):
            s=Search()
            start = time.time()
            tar_message =s.search_doc(fingerprint)
            end = time.time()
            sumtime+=end-start
            #print('-------------------use time:', (end-start))
        print(1000/sumtime)

if __name__ == "__main__":
    unittest.main()
